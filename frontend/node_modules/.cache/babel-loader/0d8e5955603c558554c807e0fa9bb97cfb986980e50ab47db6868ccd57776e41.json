{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/E-TokoBeras/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7;import React,{useState,useEffect}from'react';import{Route,Routes,useNavigate,Link,Navigate}from'react-router-dom';import ProductList from'./components/ProductList';import Cart from'./components/Cart';import Login from'./components/Login';import{login}from'./api';import styled from'styled-components';// Styled components\nimport{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Navbar=styled.nav(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background-color: #3f51b5;\\n  color: white;\\n  padding: 10px 20px;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n\"])));const Title=styled.h1(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  font-size: 24px;\\n  margin-right: 20px;\\n\"])));const Button=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  background-color: #f44336;\\n  color: white;\\n  padding: 10px 20px;\\n  border: none;\\n  border-radius: 5px;\\n  cursor: pointer;\\n\\n  &:hover {\\n    background-color: #e53935;\\n  }\\n  margin-left: 20px;\\n\"])));const NavLinks=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: 20px;\\n\"])));const NavLink=styled(Link)(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  color: white;\\n  text-decoration: none;\\n  font-size: 16px;\\n\\n  &:hover {\\n    text-decoration: underline;\\n  }\\n\"])));const Container=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n  min-height: 100vh; /* Ensure full screen height */\\n  display: flex;\\n  flex-direction: column;\\n\"])));const Footer=styled.footer(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  background-color: #3f51b5;\\n  color: white;\\n  text-align: center;\\n  padding: 10px;\\n  margin-top: auto; /* Push the footer to the bottom */\\n\"])));function App(){const[role,setRole]=useState(localStorage.getItem('role')||null);const[cart,setCart]=useState([]);// Cart state here\nconst navigate=useNavigate();useEffect(()=>{if(role){navigate('/home');}},[role,navigate]);const handleLogin=async(username,password)=>{try{const response=await login(username,password);if(response.error){alert('Login Failed!');}else{setRole(response.role);localStorage.setItem('role',response.role);navigate('/home');}}catch(error){alert('Error during login!');}};const handleLogout=()=>{localStorage.removeItem('role');setRole(null);setCart([]);// Clear cart when logging out\nnavigate('/login');};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Navbar,{children:[/*#__PURE__*/_jsx(Title,{children:\"E-Toko Beras\"}),/*#__PURE__*/_jsxs(NavLinks,{children:[role&&role==='pembeli'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavLink,{to:\"/home\",children:\"Home\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/keranjang\",children:\"Keranjang\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/pesanan\",children:\"Pesanan\"})]}),role?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-white me-3\",children:[\"Welcome, \",role]}),/*#__PURE__*/_jsx(Button,{onClick:handleLogout,children:\"Logout\"})]}):/*#__PURE__*/_jsx(NavLink,{to:\"/login\",children:\"Login\"})]})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/home\",element:role==='pembeli'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center my-4\",children:\"Welcome, Pembeli!\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Daftar Produk\"}),/*#__PURE__*/_jsx(ProductList,{onAddToCart:product=>setCart([...cart,product])})]}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/keranjang\",element:role==='pembeli'?/*#__PURE__*/_jsx(Cart,{cart:cart,onRemoveFromCart:product=>setCart(cart.filter(item=>item.id!==product.id))}):/*#__PURE__*/_jsx(Navigate,{to:\"/cart\"})}),/*#__PURE__*/_jsx(Route,{path:\"/pesanan\",element:role==='pembeli'?/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Pesanan Anda\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})})]}),/*#__PURE__*/_jsx(Footer,{children:/*#__PURE__*/_jsx(\"p\",{children:\"\\xA9 2024 E-Toko Beras. Semua Hak Dilindungi.\"})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Route","Routes","useNavigate","Link","Navigate","ProductList","Cart","Login","login","styled","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Navbar","nav","_templateObject","_taggedTemplateLiteral","Title","h1","_templateObject2","Button","button","_templateObject3","NavLinks","div","_templateObject4","NavLink","_templateObject5","Container","_templateObject6","Footer","footer","_templateObject7","App","role","setRole","localStorage","getItem","cart","setCart","navigate","handleLogin","username","password","response","error","alert","setItem","handleLogout","removeItem","children","to","className","onClick","path","element","onAddToCart","product","onRemoveFromCart","filter","item","id","onLogin"],"sources":["C:/E-TokoBeras/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Route, Routes, useNavigate, Link, Navigate } from 'react-router-dom';\r\nimport ProductList from './components/ProductList';\r\nimport Cart from './components/Cart';\r\nimport Login from './components/Login';\r\nimport { login } from './api';\r\nimport styled from 'styled-components';\r\n\r\n// Styled components\r\nconst Navbar = styled.nav`\r\n  background-color: #3f51b5;\r\n  color: white;\r\n  padding: 10px 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  font-size: 24px;\r\n  margin-right: 20px;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  background-color: #f44336;\r\n  color: white;\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n\r\n  &:hover {\r\n    background-color: #e53935;\r\n  }\r\n  margin-left: 20px;\r\n`;\r\n\r\nconst NavLinks = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n`;\r\n\r\nconst NavLink = styled(Link)`\r\n  color: white;\r\n  text-decoration: none;\r\n  font-size: 16px;\r\n\r\n  &:hover {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  padding: 20px;\r\n  min-height: 100vh; /* Ensure full screen height */\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Footer = styled.footer`\r\n  background-color: #3f51b5;\r\n  color: white;\r\n  text-align: center;\r\n  padding: 10px;\r\n  margin-top: auto; /* Push the footer to the bottom */\r\n`;\r\n\r\nfunction App() {\r\n  const [role, setRole] = useState(localStorage.getItem('role') || null);\r\n  const [cart, setCart] = useState([]);  // Cart state here\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (role) {\r\n      navigate('/home');\r\n    }\r\n  }, [role, navigate]);\r\n\r\n  const handleLogin = async (username, password) => {\r\n    try {\r\n      const response = await login(username, password);\r\n      if (response.error) {\r\n        alert('Login Failed!');\r\n      } else {\r\n        setRole(response.role);\r\n        localStorage.setItem('role', response.role);\r\n        navigate('/home');\r\n      }\r\n    } catch (error) {\r\n      alert('Error during login!');\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('role');\r\n    setRole(null);\r\n    setCart([]); // Clear cart when logging out\r\n    navigate('/login');\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Navbar>\r\n        <Title>E-Toko Beras</Title>\r\n        <NavLinks>\r\n          {role && role === 'pembeli' && (\r\n            <>\r\n              <NavLink to=\"/home\">Home</NavLink>\r\n              <NavLink to=\"/keranjang\">Keranjang</NavLink>\r\n              <NavLink to=\"/pesanan\">Pesanan</NavLink>\r\n            </>\r\n          )}\r\n          {role ? (\r\n            <>\r\n              <span className=\"text-white me-3\">Welcome, {role}</span>\r\n              <Button onClick={handleLogout}>Logout</Button>\r\n            </>\r\n          ) : (\r\n            <NavLink to=\"/login\">Login</NavLink>\r\n          )}\r\n        </NavLinks>\r\n      </Navbar>\r\n\r\n      <Routes>\r\n        <Route\r\n          path=\"/home\"\r\n          element={\r\n            role === 'pembeli' ? (\r\n              <div>\r\n                <h1 className=\"text-center my-4\">Welcome, Pembeli!</h1>\r\n                <h2 className=\"text-center mb-4\">Daftar Produk</h2>\r\n                <ProductList onAddToCart={(product) => setCart([...cart, product])} />\r\n              </div>\r\n            ) : (\r\n              <Navigate to=\"/login\" />\r\n            )\r\n          }\r\n        />\r\n        \r\n        <Route\r\n          path=\"/keranjang\"\r\n          element={\r\n            role === 'pembeli' ? (\r\n              <Cart cart={cart} onRemoveFromCart={(product) => setCart(cart.filter(item => item.id !== product.id))} />\r\n            ) : (\r\n              <Navigate to=\"/cart\" />\r\n            )\r\n          }\r\n        />\r\n\r\n        <Route\r\n          path=\"/pesanan\"\r\n          element={\r\n            role === 'pembeli' ? (\r\n              <h1 className=\"text-center\">Pesanan Anda</h1>\r\n            ) : (\r\n              <Navigate to=\"/login\" />\r\n            )\r\n          }\r\n        />\r\n\r\n        <Route path=\"/login\" element={<Login onLogin={handleLogin} />} />\r\n      </Routes>\r\n\r\n      <Footer>\r\n        <p>&copy; 2024 E-Toko Beras. Semua Hak Dilindungi.</p>\r\n      </Footer>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}